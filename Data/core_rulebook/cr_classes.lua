-- Converted From LST file data\pathfinder\paizo\roleplaying_game\core_rulebook\cr_classes.lst
-- From repository https://github.com/pcgen/pcgen at commit 11ceb52482855f2e5f0f6c108c3dc665b12af237
SetSource({
  SourceLong="Core Rulebook",
  SourceShort="CR",
  SourceWeb="http://paizo.com/store/downloads/pathfinder/pathfinderRPG/v5748btpy88yj",
  SourceDate="2009-08",
})
DefineClass({
  Name="Barbarian",
  ExClass="Ex-Barbarian",
  HitDie=12,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.31",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "BarbarianLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  Conditions={
    function (character, item)
      return not (character.IsAlignment("LG") or character.IsAlignment("LN") or character.IsAlignment("LE")) or (character.Variables["BypassClassAlignment_Barbarian"] == 1)
    end,
  },
  Roles={
    "Combat",
    "Skill",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Brb",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Barbarian",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Ex-Barbarian",
  HitDie=12,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("4"),
  Visible=false,
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "BarbarianLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  Roles={
    "Combat",
    "Skill",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Brb",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Barbarian",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Bard",
  HitDie=8,
  MaxLevel=20,
  Memorize=false,
  SkillPointsPerLevel=Formula("6"),
  SourcePage="p.34",
  SpellStat="CHA",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "BardLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Bard-CasterLevelBLBard"),
      Variables={
        "Caster_Level_BL_Stripped_Bard",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL+Caster_Level_Bonus+CasterLevelBLBard"),
      Variables={
        "Caster_Level_Bard",
      },
    },
    {
      Category="VAR",
      Formula=Formula("charbonusto(\"PCLEVEL\",\"Bard\")"),
      Variables={
        "CasterLevelBL_x_Bard",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Bard"),
      Type={
        Name="Base",
      },
      Variables={
        "Caster_Level_Highest__Arcane",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Bard"),
      Variables={
        "Caster_Level_Total__Arcane",
      },
    },
    {
      Category="CASTERLEVEL",
      Formula=Formula("Caster_Level_BL_Stripped_Bard"),
      Variables={
        "Bard",
      },
    },
  },
  Roles={
    "Skill",
  },
  Types={
    "Base",
    "PC",
    "SpontaneousArcane",
    "Spontaneous",
  },
  Facts={
    ClassType="PC",
    Abb="Brd",
    SpellType="Arcane",
  },
  Levels={
    {
      Level="1",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
      },
      SpellsKnown={
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="2",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
      },
      SpellsKnown={
        Formula("5"),
        Formula("3"),
      },
    },
    {
      Level="3",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("4"),
      },
    },
    {
      Level="4",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("1"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="5",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("2"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("4"),
        Formula("3"),
      },
    },
    {
      Level="6",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("4"),
        Formula("4"),
      },
    },
    {
      Level="7",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("3"),
        Formula("1"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="8",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("4"),
        Formula("2"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
      },
    },
    {
      Level="9",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
      },
    },
    {
      Level="10",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
        Formula("1"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="11",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("2"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
      },
    },
    {
      Level="12",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
      },
    },
    {
      Level="13",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
        Formula("1"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="14",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("2"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
      },
    },
    {
      Level="15",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
      },
    },
    {
      Level="16",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
        Formula("1"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="17",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("2"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
      },
    },
    {
      Level="18",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
      },
    },
    {
      Level="19",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
      },
    },
    {
      Level="20",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
        Formula("5"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("5"),
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Bard",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Cleric",
  HitDie=8,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.38",
  SpellStat="WIS",
  AutomaticKnownSpells={
    {
      Level=0,
    },
    {
      Level=1,
    },
    {
      Level=2,
    },
    {
      Level=3,
    },
    {
      Level=4,
    },
    {
      Level=5,
    },
    {
      Level=6,
    },
    {
      Level=7,
    },
    {
      Level=8,
    },
    {
      Level=9,
    },
  },
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="DOMAIN",
      Formula=Formula("ClericDomainCount"),
      Variables={
        "NUMBER",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "ClericLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("ClericLVL"),
      Variables={
        "DomainLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("2"),
      Variables={
        "ClericDomainCount",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Cleric-CasterLevelBLCleric"),
      Variables={
        "Caster_Level_BL_Stripped_Cleric",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL+Caster_Level_Bonus+CasterLevelBLCleric"),
      Variables={
        "Caster_Level_Cleric",
      },
    },
    {
      Category="VAR",
      Formula=Formula("charbonusto(\"PCLEVEL\",\"Cleric\")"),
      Variables={
        "CasterLevelBL_x_Cleric",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Cleric"),
      Type={
        Name="Base",
      },
      Variables={
        "Caster_Level_Highest__Divine",
      },
    },
    {
      Category="CASTERLEVEL",
      Formula=Formula("Caster_Level_BL_Stripped_Cleric"),
      Variables={
        "Cleric",
      },
    },
  },
  BonusLanguages={
    {
      Name="Abyssal",
    },
    {
      Name="Celestial",
    },
    {
      Name="Infernal",
    },
  },
  Roles={
    "Cleric",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Clr",
    SpellType="Divine",
  },
  Levels={
    {
      Level="1",
      ProhibitedSpells={
        {
          Alignments={
            "Good",
          },
          Conditions={
            function (character, item)
              return (character.Variables["ProhibitSpell_Alignment_Good"] == 1)
            end,
          },
        },
      },
    },
    {
      Level="1",
      ProhibitedSpells={
        {
          Alignments={
            "Evil",
          },
          Conditions={
            function (character, item)
              return (character.Variables["ProhibitSpell_Alignment_Evil"] == 1)
            end,
          },
        },
      },
    },
    {
      Level="1",
      ProhibitedSpells={
        {
          Alignments={
            "Lawful",
          },
          Conditions={
            function (character, item)
              return (character.Variables["ProhibitSpell_Alignment_Lawful"] == 1)
            end,
          },
        },
      },
    },
    {
      Level="1",
      ProhibitedSpells={
        {
          Alignments={
            "Chaotic",
          },
          Conditions={
            function (character, item)
              return (character.Variables["ProhibitSpell_Alignment_Chaotic"] == 1)
            end,
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Cleric",
          },
        },
      },
    },
    {
      Level="Start=1,Repeat=1",
      Bonuses={
        {
          Category="SKILLPOOL",
          Formula=Formula("ClericSkillPts"),
          Variables={
            "NUMBER",
          },
        },
      },
    },
    {
      Level="1",
      SpellsPerDay={
        Formula("3"),
        Formula("1"),
      },
    },
    {
      Level="2",
      SpellsPerDay={
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="3",
      SpellsPerDay={
        Formula("4"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="4",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="5",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="6",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="7",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="8",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="9",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="10",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="11",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="12",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="13",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="14",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="15",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="16",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="17",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="18",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="19",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
      },
    },
    {
      Level="20",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
      },
    },
  },
})
DefineClass({
  Name="Druid",
  HitDie=8,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.48",
  SpellStat="WIS",
  AutomaticKnownSpells={
    {
      Level=0,
    },
    {
      Level=1,
    },
    {
      Level=2,
    },
    {
      Level=3,
    },
    {
      Level=4,
    },
    {
      Level=5,
    },
    {
      Level=6,
    },
    {
      Level=7,
    },
    {
      Level=8,
    },
    {
      Level=9,
    },
  },
  AutomaticLanguages={
    {
      Selector=function (language)
        return stringMatch(language.Name, "Druidic")
      end,
    },
  },
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "DruidLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Druid-CasterLevelBLDruid"),
      Variables={
        "Caster_Level_BL_Stripped_Druid",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL+Caster_Level_Bonus+CasterLevelBLDruid"),
      Variables={
        "Caster_Level_Druid",
      },
    },
    {
      Category="VAR",
      Formula=Formula("charbonusto(\"PCLEVEL\",\"Druid\")"),
      Variables={
        "CasterLevelBL_x_Druid",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Druid"),
      Type={
        Name="Base",
      },
      Variables={
        "Caster_Level_Highest__Divine",
      },
    },
    {
      Category="CASTERLEVEL",
      Formula=Formula("Caster_Level_BL_Stripped_Druid"),
      Variables={
        "Druid",
      },
    },
  },
  BonusLanguages={
    {
      Name="Sylvan",
    },
  },
  Conditions={
    function (character, item)
      return character.IsAlignment("NG") or character.IsAlignment("LN") or character.IsAlignment("TN") or character.IsAlignment("CN") or character.IsAlignment("NE") or (character.Variables["BypassClassAlignment_Druid"] == 1)
    end,
  },
  Roles={
    "Druid",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Drd",
    SpellType="Divine",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Druid",
          },
        },
      },
    },
    {
      Level="1",
      ProhibitedSpells={
        {
          Alignments={
            "Good",
          },
          Conditions={
            function (character, item)
              return (character.Variables["ProhibitSpell_Alignment_Good"] == 1)
            end,
          },
        },
      },
    },
    {
      Level="1",
      ProhibitedSpells={
        {
          Alignments={
            "Evil",
          },
          Conditions={
            function (character, item)
              return (character.Variables["ProhibitSpell_Alignment_Evil"] == 1)
            end,
          },
        },
      },
    },
    {
      Level="1",
      ProhibitedSpells={
        {
          Alignments={
            "Lawful",
          },
          Conditions={
            function (character, item)
              return (character.Variables["ProhibitSpell_Alignment_Lawful"] == 1)
            end,
          },
        },
      },
    },
    {
      Level="1",
      ProhibitedSpells={
        {
          Alignments={
            "Chaotic",
          },
          Conditions={
            function (character, item)
              return (character.Variables["ProhibitSpell_Alignment_Chaotic"] == 1)
            end,
          },
        },
      },
    },
    {
      Level="0",
      Domains={
        {
          Names={
            "Air",
          },
          Conditions={
            function (character, item)
              return character.HasAnyAbility(function (ability)
                if ability.Category ~= "Special Ability" then return false end
                if ability.Name == "Druid Domain ~ Air" then return true end
                return false
              end)
            end,
          },
        },
      },
    },
    {
      Level="0",
      Domains={
        {
          Names={
            "Animal",
          },
          Conditions={
            function (character, item)
              return character.HasAnyAbility(function (ability)
                if ability.Category ~= "Special Ability" then return false end
                if ability.Name == "Druid Domain ~ Animal" then return true end
                return false
              end)
            end,
          },
        },
      },
    },
    {
      Level="0",
      Domains={
        {
          Names={
            "Earth",
          },
          Conditions={
            function (character, item)
              return character.HasAnyAbility(function (ability)
                if ability.Category ~= "Special Ability" then return false end
                if ability.Name == "Druid Domain ~ Earth" then return true end
                return false
              end)
            end,
          },
        },
      },
    },
    {
      Level="0",
      Domains={
        {
          Names={
            "Fire",
          },
          Conditions={
            function (character, item)
              return character.HasAnyAbility(function (ability)
                if ability.Category ~= "Special Ability" then return false end
                if ability.Name == "Druid Domain ~ Fire" then return true end
                return false
              end)
            end,
          },
        },
      },
    },
    {
      Level="0",
      Domains={
        {
          Names={
            "Plant",
          },
          Conditions={
            function (character, item)
              return character.HasAnyAbility(function (ability)
                if ability.Category ~= "Special Ability" then return false end
                if ability.Name == "Druid Domain ~ Plant" then return true end
                return false
              end)
            end,
          },
        },
      },
    },
    {
      Level="0",
      Domains={
        {
          Names={
            "Water",
          },
          Conditions={
            function (character, item)
              return character.HasAnyAbility(function (ability)
                if ability.Category ~= "Special Ability" then return false end
                if ability.Name == "Druid Domain ~ Water" then return true end
                return false
              end)
            end,
          },
        },
      },
    },
    {
      Level="0",
      Domains={
        {
          Names={
            "Weather",
          },
          Conditions={
            function (character, item)
              return character.HasAnyAbility(function (ability)
                if ability.Category ~= "Special Ability" then return false end
                if ability.Name == "Druid Domain ~ Weather" then return true end
                return false
              end)
            end,
          },
        },
      },
    },
    {
      Level="1",
      SpellsPerDay={
        Formula("3"),
        Formula("1"),
      },
    },
    {
      Level="2",
      SpellsPerDay={
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="3",
      SpellsPerDay={
        Formula("4"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="4",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="5",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="6",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="7",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="8",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="9",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="10",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="11",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="12",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="13",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="14",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="15",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="16",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="17",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="18",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="19",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
      },
    },
    {
      Level="20",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
      },
    },
  },
})
DefineClass({
  Name="Fighter",
  HitDie=10,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.55",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "FighterLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  Roles={
    "Combat",
    "Skill",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Ftr",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Fighter",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Monk",
  HitDie=10,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.56",
  Bonuses={
    {
      Category="VAR",
      Formula=Formula("1"),
      Variables={
        "FlurryOfBlows",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "MonkLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("1"),
      Variables={
        "KiPoolWis",
      },
    },
    {
      Category="VAR",
      Formula=Formula("1"),
      Variables={
        "KiPool",
      },
    },
  },
  Conditions={
    function (character, item)
      return character.IsAlignment("LG") or character.IsAlignment("LN") or character.IsAlignment("LE") or (character.Variables["BypassClassAlignment_Monk"] == 1)
    end,
  },
  Roles={
    "None",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Mnk",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Monk",
          },
        },
      },
    },
    {
      Level="1",
      StartingKitCount=1,
      StartingKitChoices={
        "Monk Flurry of Blows",
      },
    },
  },
})
DefineClass({
  Name="Paladin",
  ExClass="Ex-Paladin",
  HitDie=10,
  ItemCreationCasterLevel=Formula("CL-3"),
  MaxLevel=20,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.60",
  SpellStat="CHA",
  Visible=true,
  AutomaticKnownSpells={
    {
      Level=1,
    },
    {
      Level=2,
    },
    {
      Level=3,
    },
    {
      Level=4,
    },
  },
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="DOMAIN",
      Formula=Formula("PaladinDomainCount"),
      Variables={
        "NUMBER",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "PaladinLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Paladin-CasterLevelBLPaladin"),
      Variables={
        "Caster_Level_BL_Stripped_Paladin",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL+Caster_Level_Bonus-3+CasterLevelBLPaladin"),
      Variables={
        "Caster_Level_Paladin",
      },
    },
    {
      Category="VAR",
      Formula=Formula("charbonusto(\"PCLEVEL\",\"Paladin\")"),
      Variables={
        "CasterLevelBL_x_Paladin",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Paladin"),
      Type={
        Name="Base",
      },
      Variables={
        "Caster_Level_Highest__Divine",
      },
    },
    {
      Category="CASTERLEVEL",
      Formula=Formula("Caster_Level_BL_Stripped_Paladin"),
      Conditions={
        function (character, item)
          return ((character.GetLevelOfClass("Paladin") >= 4)) >= 1
        end,
      },
      Variables={
        "Paladin",
      },
    },
  },
  Conditions={
    function (character, item)
      return character.IsAlignment("LG") or (character.Variables["BypassClassAlignment_Paladin"] == 1)
    end,
  },
  Roles={
    "None",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Pld",
    SpellType="Divine",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Paladin",
          },
        },
      },
    },
    {
      Level="4",
      SpellsPerDay={
        Formula("0"),
        Formula("0"),
      },
    },
    {
      Level="5",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
      },
    },
    {
      Level="6",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
      },
    },
    {
      Level="7",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
        Formula("0"),
      },
    },
    {
      Level="8",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
        Formula("1"),
      },
    },
    {
      Level="9",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="10",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
        Formula("1"),
        Formula("0"),
      },
    },
    {
      Level="11",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
        Formula("1"),
        Formula("1"),
      },
    },
    {
      Level="12",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="13",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
        Formula("0"),
      },
    },
    {
      Level="14",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
        Formula("1"),
      },
    },
    {
      Level="15",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("2"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="16",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="17",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="18",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("2"),
      },
    },
    {
      Level="19",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="20",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
      },
    },
  },
})
DefineClass({
  Name="Ex-Paladin",
  HitDie=10,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("2"),
  Visible=false,
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "PaladinLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="XPal",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Paladin",
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Special Ability",
          Nature="AUTOMATIC",
          Names={
            "Weapon and Armor Proficiency ~ Paladin",
          },
          Conditions={
            function (character, item)
              return not (character.HasAnyAbility(function (ability)
                if ability.Category ~= "Archetype" then return false end
                if ability.IsAnyType("PaladinWeaponProficiencies", "PaladinArmorProficiency", "PaladinArmorProficiencyHeavy", "PaladinArmorProficiencyLight", "PaladinArmorProficiencyMedium", "PaladinArmorProficiency", "PaladinShieldProf", "PaladinShieldProficiency") then return true end
                return false
              end))
            end,
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Internal",
          Nature="AUTOMATIC",
          Names={
            "Weapon Prof ~ Martial",
            "Weapon Prof ~ Simple",
          },
          Conditions={
            function (character, item)
              return not (character.HasAnyAbility(function (ability)
                if ability.Category ~= "Archetype" then return false end
                if ability.IsAnyType("PaladinWeaponProficiencies") then return true end
                return false
              end))
            end,
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Internal",
          Nature="AUTOMATIC",
          Names={
            "Armor Prof ~ Heavy",
          },
          Conditions={
            function (character, item)
              return not (character.HasAnyAbility(function (ability)
                if ability.Category ~= "Archetype" then return false end
                if ability.IsAnyType("PaladinArmorProficiency", "PaladinArmorProficiencyHeavy") then return true end
                return false
              end))
            end,
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Internal",
          Nature="AUTOMATIC",
          Names={
            "Armor Prof ~ Light",
          },
          Conditions={
            function (character, item)
              return not (character.HasAnyAbility(function (ability)
                if ability.Category ~= "Archetype" then return false end
                if ability.IsAnyType("PaladinArmorProficiency", "PaladinArmorProficiencyLight") then return true end
                return false
              end))
            end,
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Internal",
          Nature="AUTOMATIC",
          Names={
            "Armor Prof ~ Medium",
          },
          Conditions={
            function (character, item)
              return not (character.HasAnyAbility(function (ability)
                if ability.Category ~= "Archetype" then return false end
                if ability.IsAnyType("PaladinArmorProficiency", "PaladinArmorProficiencyMedium") then return true end
                return false
              end))
            end,
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Internal",
          Nature="AUTOMATIC",
          Names={
            "Shield Prof",
          },
          Conditions={
            function (character, item)
              return not (character.HasAnyAbility(function (ability)
                if ability.Category ~= "Archetype" then return false end
                if ability.IsAnyType("PaladinArmorProficiency", "PaladinShieldProf", "PaladinShieldProficiency") then return true end
                return false
              end))
            end,
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Ranger",
  HitDie=10,
  ItemCreationCasterLevel=Formula("CL-3"),
  MaxLevel=20,
  SkillPointsPerLevel=Formula("6"),
  SourcePage="p.64",
  SpellStat="WIS",
  Abilities={
    {
      Category="Internal",
      Nature="AUTOMATIC",
      Names={
        "Class Skills ~ Ranger",
      },
      Conditions={
        function (character, item)
          return not (character.HasAnyAbility(function (ability)
            if ability.Category ~= "Archetype" then return false end
            if ability.IsAnyType("RangerClassSkills") then return true end
            return false
          end))
        end,
      },
    },
  },
  AutomaticKnownSpells={
    {
      Level=1,
    },
    {
      Level=2,
    },
    {
      Level=3,
    },
    {
      Level=4,
    },
  },
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "RangerLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Ranger-CasterLevelBLRanger"),
      Variables={
        "Caster_Level_BL_Stripped_Ranger",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL+Caster_Level_Bonus-3+CasterLevelBLRanger"),
      Variables={
        "Caster_Level_Ranger",
      },
    },
    {
      Category="VAR",
      Formula=Formula("charbonusto(\"PCLEVEL\",\"Ranger\")"),
      Variables={
        "CasterLevelBL_x_Ranger",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Ranger"),
      Type={
        Name="Base",
      },
      Variables={
        "Caster_Level_Highest__Divine",
      },
    },
    {
      Category="CASTERLEVEL",
      Formula=Formula("Caster_Level_Ranger"),
      Conditions={
        function (character, item)
          return ((character.GetLevelOfClass("Ranger") >= 4)) >= 1
        end,
      },
      Variables={
        "Ranger",
      },
    },
  },
  Roles={
    "Combat",
    "Skill",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Rgr",
    SpellType="Divine",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Ranger",
          },
        },
      },
    },
    {
      Level="4",
      SpellsPerDay={
        Formula("0"),
        Formula("0"),
      },
    },
    {
      Level="5",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
      },
    },
    {
      Level="6",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
      },
    },
    {
      Level="7",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
        Formula("0"),
      },
    },
    {
      Level="8",
      SpellsPerDay={
        Formula("0"),
        Formula("1"),
        Formula("1"),
      },
    },
    {
      Level="9",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="10",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
        Formula("1"),
        Formula("0"),
      },
    },
    {
      Level="11",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
        Formula("1"),
        Formula("1"),
      },
    },
    {
      Level="12",
      SpellsPerDay={
        Formula("0"),
        Formula("2"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="13",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
        Formula("0"),
      },
    },
    {
      Level="14",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
        Formula("1"),
      },
    },
    {
      Level="15",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("2"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="16",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="17",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="18",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("2"),
      },
    },
    {
      Level="19",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="20",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
      },
    },
    {
      Level="1",
      Bonuses={
        {
          Category="VAR",
          Formula=Formula("1"),
          Conditions={
            function (character, item)
              return character.HasAnyAbility(function (ability)
                if ability.Category ~= "Archetype" then return false end
                if ability.IsAnyType("RangerHuntersBond") then return true end
                return false
              end)
            end,
          },
          Variables={
            "DisableRangerHuntersBond",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Rogue",
  HitDie=8,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("8"),
  SourcePage="p.67",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "RogueLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  Roles={
    "Skill",
  },
  Types={
    "Base",
    "PC",
    "Rogue",
  },
  Facts={
    ClassType="PC",
    Abb="Rog",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Special Ability",
          Nature="AUTOMATIC",
          Names={
            "Weapon and Armor Proficiency ~ Rogue",
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Rogue",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Sorcerer",
  HitDie=6,
  MaxLevel=20,
  Memorize=false,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.70",
  SpellStat="CHA",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABPoor",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "SorcererLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Sorcerer-CasterLevelBLSorcerer"),
      Variables={
        "Caster_Level_BL_Stripped_Sorcerer",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL+Caster_Level_Bonus+CasterLevelBLSorcerer"),
      Variables={
        "Caster_Level_Sorcerer",
      },
    },
    {
      Category="VAR",
      Formula=Formula("charbonusto(\"PCLEVEL\",\"Sorcerer\")"),
      Variables={
        "CasterLevelBL_x_Sorcerer",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Sorcerer"),
      Type={
        Name="Base",
      },
      Variables={
        "Caster_Level_Highest__Arcane",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Sorcerer"),
      Variables={
        "Caster_Level_Total__Arcane",
      },
    },
    {
      Category="CASTERLEVEL",
      Formula=Formula("Caster_Level_BL_Stripped_Sorcerer"),
      Variables={
        "Sorcerer",
      },
    },
  },
  Roles={
    "Sorcerer",
  },
  Types={
    "Base",
    "PC",
    "SpontaneousArcane",
    "Spontaneous",
  },
  Facts={
    ClassType="PC",
    Abb="Sor",
    SpellType="Arcane",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Sorcerer",
          },
        },
      },
    },
    {
      Level="1",
      SpellsPerDay={
        Formula("0"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="2",
      SpellsPerDay={
        Formula("0"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("5"),
        Formula("2"),
      },
    },
    {
      Level="3",
      SpellsPerDay={
        Formula("0"),
        Formula("5"),
      },
      SpellsKnown={
        Formula("5"),
        Formula("3"),
      },
    },
    {
      Level="4",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("3"),
        Formula("1"),
      },
    },
    {
      Level="5",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("6"),
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="6",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("5"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("7"),
        Formula("4"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="7",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("7"),
        Formula("5"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="8",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("8"),
        Formula("5"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="9",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("8"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="10",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="11",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="12",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="13",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="14",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="15",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="16",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="17",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="18",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("5"),
        Formula("3"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="19",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("4"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="20",
      SpellsPerDay={
        Formula("0"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
        Formula("6"),
      },
      SpellsKnown={
        Formula("9"),
        Formula("5"),
        Formula("5"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
      },
    },
  },
})
DefineClass({
  Name="Wizard",
  AllowBaseClass=false,
  HitDie=6,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.77",
  SpellBook=true,
  SpellStat="INT",
  Visible=true,
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABPoor",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "WizardLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("1"),
      Variables={
        "SpellMasteryQualify",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Wizard-CasterLevelBLWizard"),
      Variables={
        "Caster_Level_BL_Stripped_Wizard",
      },
    },
    {
      Category="VAR",
      Formula=Formula("WizardLVL+Caster_Level_Bonus+CasterLevelBLWizard"),
      Variables={
        "Caster_Level_Wizard",
      },
    },
    {
      Category="VAR",
      Formula=Formula("charbonusto(\"PCLEVEL\",\"Wizard\")"),
      Variables={
        "CasterLevelBL_x_Wizard",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Wizard"),
      Type={
        Name="Base",
      },
      Variables={
        "Caster_Level_Highest__Arcane",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Wizard"),
      Variables={
        "Caster_Level_Total__Arcane",
      },
    },
    {
      Category="CASTERLEVEL",
      Formula=Formula("Caster_Level_BL_Stripped_Wizard"),
      Variables={
        "Wizard",
      },
    },
  },
  Roles={
    "Wizard",
  },
  Types={
    "Base",
    "PC",
  },
  Facts={
    ClassType="PC",
    Abb="Wiz",
    SpellType="Arcane",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Wizard",
          },
        },
      },
    },
    {
      Level="1",
      SpellsPerDay={
        Formula("3"),
        Formula("1"),
      },
    },
    {
      Level="2",
      SpellsPerDay={
        Formula("4"),
        Formula("2"),
      },
    },
    {
      Level="3",
      SpellsPerDay={
        Formula("4"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="4",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="5",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="6",
      SpellsPerDay={
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="7",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="8",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="9",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="10",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="11",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="12",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="13",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="14",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="15",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="16",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="17",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="18",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="19",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("3"),
        Formula("3"),
      },
    },
    {
      Level="20",
      SpellsPerDay={
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
        Formula("4"),
      },
    },
  },
  SubClasses={
    {
      Choice={
        Kind="SCHOOL",
        Value="Abjuration",
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Abjuration School",
              },
            },
          },
          Conditions={
            function (character, item)
              return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
            end,
          },
        },
      },
      Name="Abjurer",
      Cost=0,
    },
    {
      Choice={
        Kind="SCHOOL",
        Value="Conjuration",
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Conjuration School",
              },
            },
          },
          Conditions={
            function (character, item)
              return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
            end,
          },
        },
      },
      Name="Conjurer",
      Cost=0,
    },
    {
      Choice={
        Kind="SCHOOL",
        Value="Divination",
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Divination School",
              },
            },
          },
          Conditions={
            function (character, item)
              return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
            end,
          },
        },
      },
      Name="Diviner",
      Cost=0,
    },
    {
      Choice={
        Kind="SCHOOL",
        Value="Enchantment",
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Enchantment School",
              },
            },
          },
          Conditions={
            function (character, item)
              return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
            end,
          },
        },
      },
      Name="Enchanter",
      Cost=0,
    },
    {
      Choice={
        Kind="SCHOOL",
        Value="Evocation",
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Evocation School",
              },
            },
          },
          Conditions={
            function (character, item)
              return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
            end,
          },
        },
      },
      Name="Evoker",
      Cost=0,
    },
    {
      Choice={
        Kind="SCHOOL",
        Value="Illusion",
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Illusion School",
              },
            },
          },
          Conditions={
            function (character, item)
              return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
            end,
          },
        },
      },
      Name="Illusionist",
      Cost=0,
    },
    {
      Choice={
        Kind="SCHOOL",
        Value="Necromancy",
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Necromancy School",
              },
            },
          },
          Conditions={
            function (character, item)
              return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
            end,
          },
        },
      },
      Name="Necromancer",
      Cost=0,
    },
    {
      Choice={
        Kind="SCHOOL",
        Value="Transmutation",
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Transmutation School",
              },
            },
          },
          Conditions={
            function (character, item)
              return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
            end,
          },
        },
      },
      Name="Transmuter",
      Cost=0,
    },
    {
      Choice={
      },
      Levels={
        {
          Level="1",
          Abilities={
            {
              Category="Wizard Class Feature",
              Nature="AUTOMATIC",
              Names={
                "Universal School",
              },
              Conditions={
                function (character, item)
                  return (character.Variables["Wizard_CF_ArcaneSchool"] == 0)
                end,
                function (character, item)
                  return (character.Variables["DisallowWizardArcaneSchoolArchetype"] == 0)
                end,
              },
            },
          },
        },
      },
      Name="Universalist",
      Cost=0,
    },
  },
})
DefineClass({
  Name="Arcane Archer",
  HitDie=10,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.374",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "ArcaneArcherLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  ClassSkills={
    "Perception",
    "Ride",
    "Stealth",
    "Survival",
  },
  Conditions={
    function (character, item)
      return 2 <= character.CountAbilities(function (ability)
        if ability.Category ~= "FEAT" then return false end
        if ability.Name == "Point-Blank Shot" then return true end
        if ability.Name == "Precise Shot" then return true end
        return false
      end)
    end,
    function (character, item)
      return character.HasAnyAbility(function (ability)
        if ability.Category ~= "FEAT" then return false end
        if ability.Name == "Weapon Focus (Longbow)" then return true end
        if ability.Name == "Weapon Focus (Shortbow)" then return true end
        return false
      end)
    end,
    function (character, item)
      return (character.SpellCount("Arcane", 1)) >= 1
    end,
    function (character, item)
      return character.TotalAttackBonus >= 6
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="Arc",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="CLASS",
          Nature="AUTOMATIC",
          Names={
            "Arcane Archer",
          },
        },
      },
    },
    {
      Level="2",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="3",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="4",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="6",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="7",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="8",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="10",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
  },
})
DefineClass({
  Name="Arcane Trickster",
  HitDie=6,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.376",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Fortitude",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Reflex",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABPoor",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "ArcaneTricksterLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
  },
  ClassSkills={
    "Acrobatics",
    "Appraise",
    "Bluff",
    "Climb",
    "Diplomacy",
    "Disable Device",
    "Disguise",
    "Escape Artist",
    "TYPE=Knowledge",
    "Perception",
    "Sense Motive",
    "Sleight of Hand",
    "Spellcraft",
    "Stealth",
    "Swim",
  },
  Conditions={
    function (character, item)
      return character.IsAlignment("NG") or character.IsAlignment("TN") or character.IsAlignment("NE") or character.IsAlignment("CG") or character.IsAlignment("CN") or character.IsAlignment("CE") or (character.Variables["BypassClassAlignment_Arcane_Trickster"] == 1)
    end,
    function (character, item)
      return (character.Skill("Disable Device").ranks >= 4) and (character.Skill("Escape Artist").ranks >= 4) and (character.Skill("Knowledge (Arcana)").ranks >= 4)
    end,
    function (character, item)
      return (countTrue(character.HasSpell("Mage Hand"))) >= 1
    end,
    function (character, item)
      return (character.SpellCount("Arcane", 2)) >= 1
    end,
    function (character, item)
      return (character.Variables["SneakAttackDice"] >= 2)
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="Art",
  },
  Levels={
    {
      Level="1",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="2",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="3",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="4",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="5",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="6",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="7",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="8",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="9",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="10",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Arcane Trickster",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Assassin",
  HitDie=8,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.378",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "AssassinLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  ClassSkills={
    "Acrobatics",
    "Bluff",
    "Climb",
    "Diplomacy",
    "Disable Device",
    "Disguise",
    "Escape Artist",
    "Intimidate",
    "Linguistics",
    "Perception",
    "Sense Motive",
    "Sleight of Hand",
    "Stealth",
    "Swim",
    "Use Magic Device",
  },
  Conditions={
    function (character, item)
      return character.IsAlignment("LE") or character.IsAlignment("NE") or character.IsAlignment("CE") or (character.Variables["BypassClassAlignment_Assassin"] == 1)
    end,
    function (character, item)
      return (character.Skill("Disguise").ranks >= 2) and (character.Skill("Stealth").ranks >= 5)
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="Asn",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Assassin",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Dragon Disciple",
  HitDie=12,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.380",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "DragonDiscipleLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
  },
  ClassSkills={
    "Diplomacy",
    "Escape Artist",
    "Fly",
    "TYPE=Knowledge",
    "Perception",
    "Spellcraft",
  },
  Conditions={
    function (character, item)
      return ((character.HasLanguageMatching("Draconic") and 1 or 0)) >= 1
    end,
    function (character, item)
      return character.Facts["ABILITY"]["QualifiedForDragonDisciple"] == "true" or any(character.Classes, function (class) return class.Memorize == false end) and any(character.Classes, function (class) class.IsType("Arcane") end) and not (((character.GetLevelOfClass("Sorcerer") >= 1)) >= 1) or ((character.GetLevelOfClass("Sorcerer") >= 1)) >= 1 and character.HasAnyAbility(function (ability)
        if ability.Category ~= "Special Ability" then return false end
        if ability.Name == "Sorcerer Bloodline ~ Draconic" then return true end
        return false
      end)
    end,
    function (character, item)
      return not ((any(character.Race.RaceTypes, function (type) stringMatch(type, "Dragon") end)))
    end,
    function (character, item)
      return (character.Skill("Knowledge (Arcana)").ranks >= 5)
    end,
    function (character, item)
      return not ((any(character.Templates, function (template) return stringMatch(template.Name, "Half Dragon") end)))
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="DrD",
  },
  Levels={
    {
      Level="2",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="3",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="4",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="6",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="7",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="8",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="10",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Dragon Disciple",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Duelist",
  HitDie=10,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.382",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "DuelistLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  ClassSkills={
    "Acrobatics",
    "Bluff",
    "Escape Artist",
    "Perception",
    "TYPE=Perform",
    "Sense Motive",
  },
  Conditions={
    function (character, item)
      return 3 <= character.CountAbilities(function (ability)
        if ability.Category ~= "FEAT" then return false end
        if ability.Name == "Dodge" then return true end
        if ability.Name == "Mobility" then return true end
        if ability.Name == "Weapon Finesse" then return true end
        return false
      end)
    end,
    function (character, item)
      return (character.Skill("Acrobatics").ranks >= 2) and (character.BestSkillOfType("Perform").ranks >= 2)
    end,
    function (character, item)
      return character.TotalAttackBonus >= 6
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="Dul",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Duelist",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Eldritch Knight",
  HitDie=10,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.384",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Fortitude",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Reflex",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABFull",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "EldritchKnightLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  ClassSkills={
    "Climb",
    "Knowledge (Arcana)",
    "Knowledge (Nobility)",
    "Linguistics",
    "Ride",
    "Sense Motive",
    "Spellcraft",
    "Swim",
  },
  Conditions={
    function (character, item)
      return character.HasAnyAbility(function (ability)
        if ability.Category ~= "Internal" then return false end
        if ability.Name == "Weapon Prof ~ Martial" then return true end
        return false
      end)
    end,
    function (character, item)
      return (character.SpellCount("Arcane", 3)) >= 1
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="Elk",
  },
  Levels={
    {
      Level="2",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="3",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="4",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="5",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="6",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="7",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="8",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="9",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="10",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Eldritch Knight",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Loremaster",
  HitDie=6,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.385",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABPoor",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "LoremasterLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
  },
  ClassSkills={
    "Appraise",
    "Diplomacy",
    "Handle Animal",
    "Heal",
    "TYPE=Knowledge",
    "Linguistics",
    "TYPE=Perform",
    "Spellcraft",
    "Use Magic Device",
  },
  Conditions={
    function (character, item)
      return character.HasAnyAbility(function (ability)
        if ability.Category ~= "FEAT" then return false end
        if ability.Name == "Skill Focus (Knowledge%)" then return true end
        return false
      end)
    end,
    function (character, item)
      return 3 <= character.CountAbilities(function (ability)
        if ability.Category ~= "FEAT" then return false end
        if ability.Name == "TYPE=Metamagic" then return true end
        if ability.Name == "TYPE=ItemCreation" then return true end
        return false
      end)
    end,
    function (character, item)
      return (character.BestSkillOfType("Knowledge").ranks >= 7) and (character.BestSkillOfType("Knowledge").ranks >= 7)
    end,
    function (character, item)
      return ((#filter(character.SpellsKnown, function (spell) return spell.School == "Divination" and spell.Level >= 3 end))) >= 1
    end,
    function (character, item)
      return ((#filter(character.SpellsKnown, function (spell) return spell.School == "Divination" and spell.Level >= 0 end))) >= 7
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="Lor",
  },
  Levels={
    {
      Level="1",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="2",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="3",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="4",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="5",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="6",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="7",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="8",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="9",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="10",
      Add={
        AddSpellCasterLevel({
        }),
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Loremaster",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Mystic Theurge",
  HitDie=6,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.387",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABPoor",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
  },
  ClassSkills={
    "Knowledge (Arcana)",
    "Knowledge (Religion)",
    "Sense Motive",
    "Spellcraft",
  },
  Conditions={
    function (character, item)
      return (character.Skill("Knowledge (Arcana)").ranks >= 3) and (character.Skill("Knowledge (Religion)").ranks >= 3)
    end,
    function (character, item)
      return (character.SpellCount("Divine", 2)) >= 1
    end,
    function (character, item)
      return (character.SpellCount("Arcane", 2)) >= 1
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="Myt",
  },
  Levels={
    {
      Level="1",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="2",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="3",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="4",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="5",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="6",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="7",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="8",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="9",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="10",
      Add={
        AddSpellCasterLevel({
          Arcane=true,
        }),
        AddSpellCasterLevel({
          Divine=true,
        }),
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Mystic Theurge",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Pathfinder Chronicler",
  HitDie=8,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("8"),
  SourcePage="p.388",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Reflex",
        "BASE.Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "PathfinderChroniclerLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
  },
  ClassSkills={
    "Appraise",
    "Bluff",
    "Diplomacy",
    "Disguise",
    "Escape Artist",
    "Intimidate",
    "TYPE=Knowledge",
    "Linguistics",
    "Perception",
    "TYPE=Perform",
    "Ride",
    "Sense Motive",
    "Sleight of Hand",
    "Survival",
    "Use Magic Device",
  },
  Conditions={
    function (character, item)
      return (character.Skill("Linguistics").ranks >= 3) and (character.Skill("Perform (Oratory)").ranks >= 5) and (character.Skill("Profession (Scribe)").ranks >= 5)
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="PfC",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Pathfinder Chronicler",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Shadowdancer",
  HitDie=8,
  MaxLevel=10,
  SkillPointsPerLevel=Formula("6"),
  SourcePage="p.391",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/2"),
      Variables={
        "BASE.Reflex",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("(classlevel(\"APPLIEDAS=NONEPIC\")+1)/3"),
      Variables={
        "BASE.Fortitude",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "ShadowdancerLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  ClassSkills={
    "Acrobatics",
    "Bluff",
    "Diplomacy",
    "Disguise",
    "Escape Artist",
    "Perception",
    "TYPE=Perform",
    "Sleight of Hand",
    "Stealth",
  },
  Conditions={
    function (character, item)
      return 3 <= character.CountAbilities(function (ability)
        if ability.Category ~= "FEAT" then return false end
        if ability.Name == "Combat Reflexes" then return true end
        if ability.Name == "Dodge" then return true end
        if ability.Name == "Mobility" then return true end
        return false
      end)
    end,
    function (character, item)
      return (character.Skill("Stealth").ranks >= 5) and (character.Skill("Perform (Dance)").ranks >= 2)
    end,
  },
  Types={
    "PC",
    "Prestige",
  },
  Facts={
    ClassType="PC",
    Abb="Shd",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Class",
          Nature="AUTOMATIC",
          Names={
            "Shadowdancer",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Adept",
  HitDie=6,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.448",
  SpellListChoiceCount=1,
  SpellStat="WIS",
  AutomaticKnownSpells={
    {
      Level=0,
    },
    {
      Level=1,
    },
    {
      Level=2,
    },
    {
      Level=3,
    },
    {
      Level=4,
    },
    {
      Level=5,
    },
  },
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABPoor",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "AdeptLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Adept-CasterLevelBLAdept"),
      Variables={
        "Caster_Level_BL_Stripped_Adept",
      },
    },
    {
      Category="VAR",
      Formula=Formula("AdeptLVL+Caster_Level_Bonus+CasterLevelBLAdept"),
      Variables={
        "Caster_Level_Adept",
      },
    },
    {
      Category="VAR",
      Formula=Formula("charbonusto(\"PCLEVEL\",\"Adept\")"),
      Variables={
        "CasterLevelBL_x_Adept",
      },
    },
    {
      Category="VAR",
      Formula=Formula("Caster_Level_Adept"),
      Type={
        Name="Base",
      },
      Variables={
        "Caster_Level_Highest__Divine",
      },
    },
    {
      Category="CASTERLEVEL",
      Formula=Formula("Caster_Level_BL_Stripped_Adept"),
      Variables={
        "Adept",
      },
    },
  },
  ClassSkills={
    "TYPE=Craft",
    "Handle Animal",
    "Heal",
    "TYPE=Knowledge",
    "TYPE=Profession",
    "Spellcraft",
    "Survival",
  },
  SpellListChoices={
    "Adept",
  },
  Types={
    "Base",
    "NPC",
  },
  Facts={
    ClassType="NPC",
    Abb="Adp",
    SpellType="Divine",
  },
  Levels={
    {
      Level="1",
      SpellLists={
        {
          Kind="Class",
          Name="Adept",
          Levels={
            {
              SpellLevel=0,
              Spells={
                "Create Water",
                "Detect Magic",
                "Ghost Sound",
                "Guidance",
                "Light",
                "Mending",
                "Purify Food and Drink",
                "Read Magic",
                "Stabilize",
                "Touch of Fatigue",
              },
            },
          },
        },
      },
    },
    {
      Level="1",
      SpellLists={
        {
          Kind="Class",
          Name="Adept",
          Levels={
            {
              SpellLevel=1,
              Spells={
                "Bless",
                "Burning Hands",
                "Cause Fear",
                "Command",
                "Comprehend Languages",
                "Cure Light Wounds",
                "Detect Chaos",
                "Detect Evil",
                "Detect Good",
                "Detect Law",
                "Endure Elements",
                "Obscuring Mist",
                "Protection from Chaos",
                "Protection from Evil",
                "Protection from Good",
                "Protection from Law",
                "Sleep",
              },
            },
          },
        },
      },
    },
    {
      Level="1",
      SpellLists={
        {
          Kind="Class",
          Name="Adept",
          Levels={
            {
              SpellLevel=2,
              Spells={
                "Aid",
                "Animal Trance",
                "Bear's Endurance",
                "Bull's Strength",
                "Cat's Grace",
                "Cure Moderate Wounds",
                "Darkness",
                "Delay Poison",
                "Invisibility",
                "Mirror Image",
                "Resist Energy",
                "Scorching Ray",
                "See Invisibility",
                "Web",
              },
            },
          },
        },
      },
    },
    {
      Level="1",
      SpellLists={
        {
          Kind="Class",
          Name="Adept",
          Levels={
            {
              SpellLevel=3,
              Spells={
                "Animate Dead",
                "Bestow Curse",
                "Contagion",
                "Continual Flame",
                "Cure Serious Wounds",
                "Daylight",
                "Deeper Darkness",
                "Lightning Bolt",
                "Neutralize Poison",
                "Remove Curse",
                "Remove Disease",
                "Tongues",
              },
            },
          },
        },
      },
    },
    {
      Level="1",
      SpellLists={
        {
          Kind="Class",
          Name="Adept",
          Levels={
            {
              SpellLevel=4,
              Spells={
                "Cure Critical Wounds",
                "Minor Creation",
                "Polymorph",
                "Restoration",
                "Stoneskin",
                "Wall of Fire",
              },
            },
          },
        },
      },
    },
    {
      Level="1",
      SpellLists={
        {
          Kind="Class",
          Name="Adept",
          Levels={
            {
              SpellLevel=5,
              Spells={
                "Baleful Polymorph",
                "Break Enchantment",
                "Commune",
                "Heal",
                "Major Creation",
                "Raise Dead",
                "True Seeing",
                "Wall of Stone",
              },
            },
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="Special Ability",
          Nature="AUTOMATIC",
          Names={
            "All Automatic Proficiencies",
          },
        },
        {
          Category="FEAT",
          Nature="AUTOMATIC",
          Names={
            "Simple Weapon Proficiency",
          },
        },
      },
    },
    {
      Level="1",
      SpellsPerDay={
        Formula("3"),
        Formula("1"),
      },
    },
    {
      Level="2",
      SpellsPerDay={
        Formula("3"),
        Formula("1"),
      },
      Abilities={
        {
          Category="Special Ability",
          Nature="AUTOMATIC",
          Names={
            "Arcane Bond ~ Familiar",
          },
        },
      },
      Bonuses={
        {
          Category="VAR",
          Formula=Formula("CL"),
          Variables={
            "FamiliarMasterLVL",
          },
        },
      },
    },
    {
      Level="3",
      SpellsPerDay={
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="4",
      SpellsPerDay={
        Formula("3"),
        Formula("2"),
        Formula("0"),
      },
    },
    {
      Level="5",
      SpellsPerDay={
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="6",
      SpellsPerDay={
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="7",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="8",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("0"),
      },
    },
    {
      Level="9",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="10",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="11",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="12",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("0"),
      },
    },
    {
      Level="13",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="14",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="15",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="16",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("0"),
      },
    },
    {
      Level="17",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="18",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
        Formula("1"),
      },
    },
    {
      Level="19",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
    {
      Level="20",
      SpellsPerDay={
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("3"),
        Formula("2"),
      },
    },
  },
})
DefineClass({
  Name="Aristocrat",
  HitDie=8,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("4"),
  SourcePage="p.449",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "AristocratLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
  },
  ClassSkills={
    "Appraise",
    "Bluff",
    "TYPE=Craft",
    "Diplomacy",
    "Disguise",
    "Handle Animal",
    "Intimidate",
    "TYPE=Knowledge",
    "Linguistics",
    "Perception",
    "TYPE=Perform",
    "TYPE=Profession",
    "Ride",
    "Sense Motive",
    "Swim",
    "Survival",
  },
  Types={
    "Base",
    "NPC",
  },
  Facts={
    ClassType="NPC",
    Abb="Ari",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Special Ability",
          Nature="AUTOMATIC",
          Names={
            "All Automatic Proficiencies",
            "All Martial Weapon Proficiencies",
          },
        },
        {
          Category="FEAT",
          Nature="AUTOMATIC",
          Names={
            "Martial Weapon Proficiency Output",
            "Simple Weapon Proficiency",
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="FEAT",
          Nature="AUTOMATIC",
          Names={
            "Armor Proficiency (Heavy)",
            "Armor Proficiency (Light)",
            "Armor Proficiency (Medium)",
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="FEAT",
          Nature="AUTOMATIC",
          Names={
            "Shield Proficiency",
            "Tower Shield Proficiency",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Commoner",
  HitDie=6,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("2"),
  SourcePage="p.449",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABPoor",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "CommonerLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Will",
      },
    },
  },
  ClassSkills={
    "Climb",
    "TYPE=Craft",
    "Handle Animal",
    "Perception",
    "TYPE=Profession",
    "Ride",
    "Swim",
  },
  Types={
    "Base",
    "NPC",
  },
  WeaponBonusProficiencySelections={
    {
      "TYPE=Simple",
    },
  },
  Facts={
    ClassType="NPC",
    Abb="Com",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Special Ability",
          Nature="AUTOMATIC",
          Names={
            "All Automatic Proficiencies",
            "Weapon and Armor Proficiency ~ Commoner",
          },
        },
      },
    },
  },
})
DefineClass({
  Name="Expert",
  HitDie=8,
  MaxLevel=20,
  SkillPointsPerLevel=Formula("6"),
  SourcePage="p.450",
  Bonuses={
    {
      Category="COMBAT",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")*3/4"),
      Type={
        Name="Base",
        Replace=true,
      },
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateBABProgression"] == 0)
        end,
      },
      Variables={
        "BASEAB",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/3"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Fortitude",
        "BASE.Reflex",
      },
    },
    {
      Category="SAVE",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")/2+2"),
      Conditions={
        function (character, item)
          return (character.Variables["UseAlternateSaveProgression"] == 0)
        end,
      },
      Variables={
        "BASE.Will",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalBAB"] == 1)
        end,
      },
      Variables={
        "ClassBABModerate",
      },
    },
    {
      Category="VAR",
      Formula=Formula("CL"),
      Variables={
        "ExpertLVL",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Fortitude",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSavePoor_Reflex",
      },
    },
    {
      Category="VAR",
      Formula=Formula("classlevel(\"APPLIEDAS=NONEPIC\")"),
      Conditions={
        function (character, item)
          return (character.Variables["UseFractionalSave"] == 1)
        end,
      },
      Variables={
        "ClassSaveGood_Will",
      },
    },
  },
  Types={
    "Base",
    "NPC",
  },
  Facts={
    ClassType="NPC",
    Abb="Exp",
  },
  Levels={
    {
      Level="1",
      Abilities={
        {
          Category="Special Ability",
          Nature="AUTOMATIC",
          Names={
            "All Automatic Proficiencies",
          },
        },
        {
          Category="FEAT",
          Nature="AUTOMATIC",
          Names={
            "Simple Weapon Proficiency",
          },
        },
      },
    },
    {
      Level="1",
      Abilities={
        {
          Category="FEAT",
          Nature="AUTOMATIC",
          Names={
            "Armor Proficiency (Light)",
          },
        },
      },
    },
    {
      Level="1",
      Bonuses={
        {
          Category="ABILITYPOOL",
          Formula=Formula("10"),
          Variables={
            "Expert Class Skills",
          },
        },
      },
    },
  },
})
